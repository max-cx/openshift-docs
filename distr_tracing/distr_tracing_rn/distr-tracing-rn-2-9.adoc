:_content-type: ASSEMBLY
[id="distributed-tracing-rn-2-9"]
= Release notes for {DTProductName} 2.9
include::_attributes/common-attributes.adoc[]
:context: distributed-tracing-rn-2-9

toc::[]

include::modules/distr-tracing-product-overview.adoc[leveloffset=+1]

== Component versions in the {DTProductName} 2.9

[options="header"]
|===
|Operator |Component |Version
|{JaegerName}
|Jaeger
|1.47.0

|{OTELName}
|OpenTelemetry
|0.81.0

|{TempoName}
|{TempoShortName}
|2.1.1
|===

== {JaegerName}

=== New features and enhancements

* None.

//=== Technology Preview features
//not for 2.9

=== Bug fixes

* Before this update, connection was refused due to a missing gRPC port on the `jaeger-query` deployment. This issue was causing the following error: *transport: Error while dialing: dial tcp :16685: connect: connection refused*. With this update, the Jaeger Query gRPC port (16685) is successfully exposed on the Jaeger Query service. (link:https://issues.redhat.com/browse/TRACING-3322[TRACING-3322])

* Before this update, the wrong port was exposed for `jaeger-production-query`, resulting in refused connection. With this update, the issue is fixed by exposing the Jaeger Query gRPC port (16685) on the Jaeger Query deployment. (link:https://issues.redhat.com/browse/TRACING-2968[TRACING-2968])

* Before this update, when deploying Service Mesh on single-node OpenShift clusters in disconnected environments, the Jaeger Pod frequently went into the Pending state. With this update, the issue is fixed. (link:https://issues.redhat.com/browse/TRACING-3312[TRACING-3312])

* Before this update, the Jaeger Operator Pod was restarting with the default memory value due to the *OOMKilled* error. With this update, this issue is fixed by removing the resource limits. (link:https://issues.redhat.com/browse/TRACING-3173[TRACING-3173])

=== Known issues

* Apache Spark is not supported.
ifndef::openshift-rosa[]

* The streaming deployment via AMQ/Kafka is unsupported on IBM Z and IBM Power Systems.
endif::openshift-rosa[]

== {TempoName}

:FeatureName: The {TempoName}
include::snippets/technology-preview.adoc[leveloffset=+1]

=== New features and enhancements

This release introduces the following noteworthy enhancements for the {TempoShortName}:

* Support the link:https://operatorframework.io/operator-capabilities/[operator maturity] Level IV, Deep Insights, which enables upgrading, monitoring, and alerting of `TempoStack` instances and the {TempoOperator}.

* Add Ingress and OpenShift Route configuration for the Gateway.

* Support managed and unmanaged states in the `TempoStack` custom resource.

* Expose the following additional ingestion protocols in the Distributor service: Jaeger Thrift binary, Jaeger Thrift compact, Jaeger gRPC, and Zipkin. When the Gateway is enabled, only the OTLP gRPC is enabled.

* Expose the Jaeger Query gRPC endpoint on the Query Frontend service.

* Support multitenancy without Gateway authentication and authorization.

//=== Technology Preview features
//not for 2.9

=== Bug fixes

* Before this update, the {TempoOperator} was not compatible with disconnected environments. With this update, the {TempoOperator} supports disconnected environments. (link:https://issues.redhat.com/browse/TRACING-3145[TRACING-3145])

* Before this update, the {TempoOperator) with TLS failed to start on {product-title}. With this update, the mTLS communication is enabled between Tempo components, the Operand starts successfully, and the Jaeger UI is accessible. (link:https://issues.redhat.com/browse/TRACING-3091[TRACING-3091])

* Before this update, the resource limits from the {TempoOperator} caused errors such as *OOMKilled*. With this update, the resource limits for the {TempoOperator} are removed to avoid such errors. (link:https://issues.redhat.com/browse/TRACING-3204[TRACING-3204])

=== Known issues

* Currently, the custom TLS CA option is not implemented for connecting to object storage. (link:https://issues.redhat.com/browse/TRACING-3462[TRACING-3462])

* Currently, when used with the {TempoOperator}, the Jaeger UI only displays services that have sent traces in the last 15 minutes. For services that did not send traces in the last 15 minutes, traces are still stored but not displayed in the Jaeger UI. (link:https://issues.redhat.com/browse/TRACING-3139[TRACING-3139])

* Currently, the {TempoShortName} fails on the IBM Z (`s390x`) architecture. (link:https://issues.redhat.com/browse/TRACING-3545[TRACING-3545])

* Currently, the Tempo query frontend service must not use internal mTLS when Gateway is not deployed. This issue does not affect the Jaeger Query API. The workaround is to disable mTLS. (link:https://issues.redhat.com/browse/TRACING-3510[TRACING-3510])
+
.Workaround
:!example-caption:
====
Disable mTLS as follows:

. Open the {TempoOperator} ConfigMap for editing.
+
[source,console]
----
$ oc edit configmap tempo-operator-manager-config -n openshift-tempo-operator <1>
----
<1> The OpenShift project where the {TempoOperator} is installed.

. Disable the mTLS in the Operator configuration.
+
[source,yaml]
----
data:
  controller_manager_config.yaml: |
    featureGates:
      httpEncryption: false
      grpcEncryption: false
      builtInCertManagement:
        enabled: false
----

. Restart the {TempoOperator} Pod.
+
[source,console]
----
$ oc rollout restart deployment.apps/tempo-operator-controller -n openshift-tempo-operator
----
====

== {OTELName}

:FeatureName: The {OTELName}
include::snippets/technology-preview.adoc[leveloffset=+1]

=== New features and enhancements

This release introduces the following noteworthy enhancements for the {OTELShortName}:

* Support OTLP metrics ingestion. The metrics can be forwarded and stored in the `user-workload-monitoring` via the Prometheus exporter.

* Support the link:https://operatorframework.io/operator-capabilities/[operator maturity] Level IV, Deep Insights, which enables upgrading and monitoring of `OpenTelemetry Collector` instances and the {OTELOperator}.

* Report traces and metrics from remote clusters using OTLP/HTTP(s).

* Collect OpenShift-specific resource attributes via the `resourcedetection` processor.

* Support managed and unmanaged states in the `OpenTelemetryCollector` custom resouce.

//=== Technology Preview features
//not for 2.9

=== Bug fixes

* Before this update, the {OTELOperator} was crashlooping after receiving `opentelemetry-operator.v0.74.0-5`. With this update, the issue is fixed by configuring the autoscaler. (link:https://issues.redhat.com/browse/TRACING-3190[TRACING-3190])

=== Known issues

* Currently, you must manually set the link:https://operatorframework.io/operator-capabilities/[operator maturity] to Level IV, Deep Insights. (link:https://issues.redhat.com/browse/TRACING-3431[TRACING-3431])

include::modules/support.adoc[leveloffset=+1]

include::modules/making-open-source-more-inclusive.adoc[leveloffset=+1]
